#!/usr/bin/python
import os

def crawl_dir(path):
    sub_items = os.listdir(path)
    def create_item(relative_path):
        abs_path = os.path.join(path, relative_path)
        item = {"path": abs_path}
        if os.path.isfile(abs_path):
            item["type"] = "file"
        elif os.path.isdir(abs_path):
            item["type"] = "dir"
        else:
            return None
        return item
    return filter(lambda x: x, map(create_item, sub_items))

def read_file(path):
    if not os.path.isfile(path):
        return ""
    with open(path, "r") as f:
        return f.read()
